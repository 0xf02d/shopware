        if ($#pluralLc# = $selection->filter('#pluralLc#')) {
            $mapping = QuerySelection::escape($#pluralLc#->getRoot() . '.mapping');

            $query->leftJoin(
                $selection->getRootEscaped(),
                '#mappingTable#',
                $mapping,
                sprintf('%s.uuid = %s.#table#_uuid', $selection->getRootEscaped(), $mapping)
            );
            $query->leftJoin(
                $mapping,
                '#associationTable#',
                $#pluralLc#->getRootEscaped(),
                sprintf('%s.#associationTable#_uuid = %s.uuid', $mapping, $#pluralLc#->getRootEscaped())
            );

            $this->#associationClassLc#Factory->joinDependencies($#pluralLc#, $query, $context);

            $query->groupBy(sprintf('%s.uuid', $selection->getRootEscaped()));
        }

        if ($selection->hasField('_sub_select_#propertyLc#_uuids')) {
            $query->addSelect('
                (
                    SELECT GROUP_CONCAT(mapping.#associationTable#_uuid SEPARATOR \'|\')
                    FROM #mappingTable# mapping
                    WHERE mapping.#table#_uuid = ' . $selection->getRootEscaped() . '.uuid
                ) as ' . QuerySelection::escape($selection->getField('_sub_select_#propertyLc#_uuids'))
            );
        }
