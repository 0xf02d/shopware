paths:
  - ./src

exclude_files:
  - .*test.*

layers:
  - name: Controller
    collectors:
      - type: className
        regex: .*Controller$

  - name: Repository
    collectors:
      - type: className
        regex: .*Repository$

  - name: Searcher
    collectors:
      - type: className
        regex: .*Searcher$

  - name: BasicLoader
    collectors:
      - type: className
        regex: .*BasicLoader$

  - name: DetailLoader
    collectors:
      - type: className
        regex: .*DetailLoader$

  - name: BasicFactory
    collectors:
      - type: className
        regex: ^Shopware\\.*\\Factory\\.*BasicFactory$

  - name: DetailFactory
    collectors:
      - type: className
        regex: ^Shopware\\.*\\Factory\\.*DetailFactory$

  - name: BundleWriter
    collectors:
      - type: className
        regex: ^Shopware\\.*\\Writer\\.+Writer

  - name: CoreWriter
    collectors:
      - type: className
        regex: ^Shopware\\Api\\Dbal\\EntityWriter$

  - name: PageLoader
    collectors:
      - type: className
        regex: .*PageLoader$

  - name: Database
    collectors:
      - type: className
        regex: Doctrine\\DBAL\\Connection

ruleset:
  Controller:
    - Repository
    - PageLoader

  Repository:
    - BasicLoader
    - DetailLoader
    - Searcher
    - BundleWriter

  CoreWriter:
    - Database

  PageLoader:
    - Repository

  BasicLoader:
    - Searcher
    - Reader
    - Factory
    - DetailLoader
    - BasicFactory
    - Database

  DetailLoader:
    - Searcher
    - BasicLoader
    - DetailLoader
    - DetailFactory
    - Database

  Searcher:
    - BasicLoader
    - BasicFactory
    - DetailFactory
    - Database

  BasicFactory:
    - DetailFactory
    - Database

  DetailFactory:
    - BasicFactory
    - Database

  BundleWriter:
    - CoreWriter