<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <service class="Shopware\Customer\Reader\CustomerBasicHydrator" id="shopware.customer.reader.basic_hydrator">
            <argument type="service" id="shopware.customer_group.reader.basic_hydrator"/>
        </service>

        <service class="Shopware\Customer\Reader\CustomerBasicReader" id="shopware.customer.reader.basic_reader">
            <argument id="dbal_connection" type="service"/>
            <argument id="shopware.customer.reader.basic_hydrator" type="service"/>
        </service>

        <service class="Shopware\Customer\Loader\CustomerBasicLoader" id="shopware.customer.loader.basic_loader">
            <argument type="service" id="shopware.customer.reader.basic_reader"/>
            <argument type="service" id="shopware.customer_address.loader.basic_loader"/>
            <argument type="service" id="shopware.payment_method.loader.basic_loader"/>
        </service>

        <service class="Shopware\Customer\Searcher\CustomerSearcher" id="shopware.customer.searcher">
            <argument id="dbal_connection" type="service"/>
            <argument type="collection">
                <argument id="shopware.customer.searcher.handler.default_payment_method_uuid_handler" type="service"/>
            </argument>
            <argument id="shopware.customer.loader.basic_loader" type="service"/>
        </service>

        <service class="Shopware\Customer\Writer\CustomerWriter" id="shopware.customer.writer.writer"/>

        <service class="Shopware\Customer\CustomerRepository" id="shopware.customer.repository">
            <argument id="shopware.customer.loader.basic_loader" type="service"/>
            <argument id="event_dispatcher" type="service"/>
            <argument id="shopware.customer.searcher" type="service"/>
            <argument id="shopware.customer.writer.writer" type="service"/>
            <argument id="shopware.customer.loader.detail_loader" type="service"/>
        </service>

        <service class="Shopware\Customer\Reader\CustomerDetailHydrator" id="shopware.customer.reader.detail_hydrator">
            <argument id="shopware.customer.reader.basic_hydrator" type="service"/>
            <argument type="service" id="shopware.shop.reader.basic_hydrator"/>
        </service>

        <service class="Shopware\Customer\Reader\CustomerDetailReader" id="shopware.customer.reader.detail_reader">
            <argument id="dbal_connection" type="service"/>
            <argument id="shopware.customer.reader.detail_hydrator" type="service"/>
        </service>

        <service class="Shopware\Customer\Loader\CustomerDetailLoader" id="shopware.customer.loader.detail_loader">
            <argument type="service" id="shopware.customer.reader.detail_reader"/>
            <argument type="service" id="shopware.customer_address.searcher"/>
            <argument type="service" id="shopware.customer_address.loader.basic_loader"/>
            <argument type="service" id="shopware.payment_method.loader.basic_loader"/>
        </service>

        <service class="Shopware\Customer\Searcher\Handler\PaymentMethodUuidHandler"
                 id="shopware.customer.searcher.handler.default_payment_method_uuid_handler"/>
    </services>
</container>